var q=Object.defineProperty;var d=Object.getOwnPropertySymbols;var l=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var g=(t,e,r)=>e in t?q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,w=(t,e)=>{for(var r in e||(e={}))l.call(e,r)&&g(t,r,e[r]);if(d)for(var r of d(e))y.call(e,r)&&g(t,r,e[r]);return t};var c=(t,e,r)=>new Promise((s,i)=>{var n=o=>{try{u(r.next(o))}catch(h){i(h)}},f=o=>{try{u(r.throw(o))}catch(h){i(h)}},u=o=>o.done?s(o.value):Promise.resolve(o.value).then(n,f);u((r=r.apply(t,e)).next())});import{s as a}from"./index-BO_b-Gy1.js";class E{static submitRequest(e){return c(this,null,function*(){try{const{data:{user:r},error:s}=yield a.auth.getUser();if(s||!r)throw new Error("User not authenticated");const{data:i,error:n}=yield a.from("missing_entity_requests").insert(w({user_id:r.id},e)).select().single();if(n)throw n;return i}catch(r){throw console.error("Error submitting missing entity request:",r),r}})}static getMyRequests(){return c(this,null,function*(){try{const{data:{user:e},error:r}=yield a.auth.getUser();if(r||!e)throw new Error("User not authenticated");const{data:s,error:i}=yield a.from("missing_entity_requests").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(i)throw i;return s||[]}catch(e){throw console.error("Error fetching requests:",e),e}})}static getRequest(e){return c(this,null,function*(){try{const{data:r,error:s}=yield a.from("missing_entity_requests").select("*").eq("id",e).single();if(s){if(s.code==="PGRST116")return null;throw s}return r}catch(r){throw console.error("Error fetching request:",r),r}})}}export{E as MissingEntityRequestService};
